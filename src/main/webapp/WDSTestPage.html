<html>
    <head>
        <title>WDS - FENIX Web Data Server</title>
        <link rel='icon' type='image/jpeg' href='images/fx_logo.png'>
        <link href='http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css' rel='stylesheet'>
        <link href='http://fonts.googleapis.com/css?family=Roboto:400,900,700|Roboto+Condensed:400,300,700' rel='stylesheet' type='text/css'>
        <link href='css/homepage.css' rel='stylesheet' type='text/css'>
        <link href='https://cdnjs.cloudflare.com/ajax/libs/sweetalert/0.5.0/sweet-alert.css' rel='stylesheet' type='text/css'>
        <link href='http://fenixapps.fao.org/repository/js/chosen/1.0.0/chosen.min.css' rel='stylesheet'>
        <script type='application/javascript' src='https://code.jquery.com/jquery-2.1.3.min.js'></script>
        <script type='application/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/sweetalert/0.5.0/sweet-alert.min.js'></script>
        <script type='application/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/chosen/1.4.2/chosen.jquery.min.js'></script>
        <script type='application/javascript'>
            function setup() {
                $('.chosen-select').chosen();
            }
            function query() {
                $.ajax({
                    type: 'POST',
                    url: 'rest/fenix/retrieve',
                    data: {
                        datasource: $('#datasource').val(),
                        query: $('#query').val(),
                        collection: $('#collection').val(),
                        outputType: $('#outputType').val()
                    },
                    success: function (response) {
                        var json = response;
                        if (typeof json == 'string')
                            json = $.parseJSON(response);
                        $('#out').val(JSON.stringify(json));
                    },
                    error: function(a) {
                        $('#out').val(a.responseText);
                        swal({
                            title: 'Error',
                            type: 'error',
                            text: a.responseText,
                            html: true
                        });
                    }
                });
            }
        </script>
    </head>
    <body style='background-color: #9B2335;' onload='setup();'>
        <div class='box'>
            <div class='title'>
                FENIX Web Data Server
                <img src='images/fx_logo.png' class='img'>
                <img src='images/fao_logo.png' class='img'>
            </div>
            <br>
            <div style='text-align: right;'>
                Welcome to the FENIX Web Data Server. If you're reading these words your installation of WDS was successful: congratulations!
            </div>
            <hr>
            <div>
                <div class='subtitle'>
                    Datasource
                </div>
                <br>
                <select id='datasource' style='width: 100%;' class='chosen-select' data-placeholder='Please select a datasource...'>
                    <option value='faostat'>FAOSTAT (SQL)</option>
                    <option value='guidotest'>Guido Test (NoSQL)</option>
                    <option value='orienttest'>OrientDB Test (NoSQL)</option>
                </select>
            </div>
            <br>
            <div>
                <div class='subtitle'>
                    Collection <i>(MongoDB only)</i>
                </div>
                <br>
                <select id='collection' style='width: 100%;' class='chosen-select' data-placeholder='Please select a collection...'>
                    <option value='barbaglia'>Default</option>
                </select>
            </div>
            <br>
            <div>
                <div class='subtitle'>
                    Output Type
                </div>
                <br>
                <select id='outputType' style='width: 100%;' class='chosen-select' data-placeholder='Please select a collection...'>
                    <option value='object'>Object</option>
                    <option value='array'>Array</option>
                </select>
            </div>
            <br>
            <div>
                <div class='subtitle'>
                    Query
                </div>
                <br>
                <textarea id='query' style='width: 100%; height: 75px; text-align: left;'>SELECT AreaCode, AreaNameE FROM Area</textarea>
            </div>
            <hr>
            <div>
                <div class='subtitle'>
                    Test Services
                </div>
                <br>
                <div>
                    <button class='button' onclick='query();'>
                        <i class='fa fa-database'></i> Query DB
                    </button>
                </div>
            </div>
            <hr>
            <div>
                <div class='subtitle'>
                    Results
                </div>
                <textarea id='out' style='width: 100%; height: 150px;'>

                </textarea>
            </div>
            <hr>
            <div style='text-align: center;'>
                <span>
                    <a target='_blank' href='https://github.com/FENIX-Platform/WDS'>
                        <i class='fa fa-github'></i>
                    </a>
                </span>
            </div>
        </div>
    </body>
</html>